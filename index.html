import React, { useState } from 'react';

const TallerDesignThinking = () => {
  const [activePhase, setActivePhase] = useState(null);
  const [activeSection, setActiveSection] = useState('importancia');
  const [activeTecnica, setActiveTecnica] = useState(null);
  const [completedSteps, setCompletedSteps] = useState({});
  const [notes, setNotes] = useState({});
  const [studentNotes, setStudentNotes] = useState({});

  const toggleStep = (phaseId, stepIndex) => {
    const key = `${phaseId}-${stepIndex}`;
    setCompletedSteps(prev => ({ ...prev, [key]: !prev[key] }));
  };

  const updateNote = (key, value) => {
    setNotes(prev => ({ ...prev, [key]: value }));
  };

  const updateStudentNote = (key, value) => {
    setStudentNotes(prev => ({ ...prev, [key]: value }));
  };

  // TÃ©cnicas adicionales organizadas por fase
  const tecnicasAdicionales = {
    empatizar: [
      {
        id: 'selfie-dibujo',
        nombre: 'ğŸ¤³ Selfie y Dibujo Personal',
        importancia: 'Antes de empatizar con otros, necesitamos conocernos a nosotros mismos. El autoconocimiento es la base de la empatÃ­a genuina. Cuando expresamos quiÃ©nes somos a travÃ©s de imÃ¡genes y dibujos, abrimos canales de comunicaciÃ³n que las palabras solas no pueden abrir. En Puerto Rico, donde la identidad cultural es fuerte y diversa, esta tÃ©cnica permite que cada persona celebre su individualidad mientras encuentra conexiones con otros.',
        porqueIntegrar: 'Porque muchos estudiantes (y docentes) no saben cÃ³mo presentarse mÃ¡s allÃ¡ de datos bÃ¡sicos. Esta tÃ©cnica rompe barreras, genera confianza rÃ¡pidamente, y permite al docente conocer aspectos importantes de sus estudiantes que de otra forma tomarÃ­a meses descubrir. Es perfecta para inicio de aÃ±o escolar, nuevos grupos, o cuando sientes desconexiÃ³n con tu clase.',
        actividadTaller: {
          nombre: 'ğŸ¤³ "Mi Selfie que Cuenta mi Historia"',
          objetivo: 'Que los docentes experimenten el poder de la auto-presentaciÃ³n visual para generar conexiÃ³n y empatÃ­a',
          duracion: '25 minutos',
          materiales: 'Celular con cÃ¡mara (o papel y marcadores si prefieren dibujar), hojas en blanco, marcadores de colores',
          instrucciones: [
            'OpciÃ³n A: Toma un selfie que represente quiÃ©n eres HOY como educador/a (no tiene que ser tu cara - puede ser tus manos, algo que ames, tu espacio)',
            'OpciÃ³n B: Dibuja un autorretrato simbÃ³lico (no realista) - usa colores, formas, sÃ­mbolos',
            'Alrededor de tu imagen, escribe o dibuja: 3 cosas que te apasionan, 1 reto actual, 1 sueÃ±o profesional',
            'En grupos de 3, cada persona tiene 3 minutos para compartir su imagen y lo que significa',
            'Los demÃ¡s solo escuchan - sin comentarios ni preguntas hasta que termine',
            'Al final, cada grupo comparte: Â¿QuÃ© descubrieron que no sabÃ­an de sus colegas?'
          ],
          variaciones: [
            'Para grupos virtuales: Usar fondos de Zoom que representen algo personal',
            'Para grupos grandes: Hacer galerÃ­a en la pared y "recorrido de museo"',
            'Para grupos tÃ­midos: Permitir que dibujen sin mostrarse ellos mismos'
          ],
          reflexionGuia: 'Â¿QuÃ© aprendiste de un colega que te sorprendiÃ³? Â¿CÃ³mo cambiÃ³ tu percepciÃ³n de esa persona?'
        },
        actividadEstudiantes: {
          nombre: 'ğŸ¨ "AsÃ­ Soy Yo" - Autorretrato Creativo',
          nivel: 'Elemental, Intermedio, Superior',
          objetivo: 'Que los estudiantes se conozcan entre sÃ­ a un nivel mÃ¡s profundo y practiquen la auto-expresiÃ³n',
          duracion: '40 minutos',
          materiales: 'Papel, colores, marcadores, revistas para recortar (opcional), pegamento, celulares (opcional para niveles superiores)',
          instrucciones: [
            'Explica: "Hoy vamos a conocernos de una forma especial. No con palabras, sino con imÃ¡genes"',
            'Cada estudiante crea su autorretrato creativo (NO tiene que ser realista)',
            'Debe incluir: algo que aman, algo que los hace Ãºnicos, un sueÃ±o o meta',
            'Pueden dibujar, hacer collage, o combinar selfie con dibujo',
            'GalerÃ­a silenciosa: Pegan todos los trabajos y caminan observando sin hablar',
            'Voluntarios comparten la historia detrÃ¡s de su imagen'
          ],
          variaciones: [
            'Elemental: "Mi mano mÃ¡gica" - trazan su mano y en cada dedo dibujan algo que aman',
            'Intermedio: Crear un "escudo personal" dividido en 4 partes (familia, pasiÃ³n, reto, sueÃ±o)',
            'Superior: Video-selfie de 30 segundos o collage digital en Canva'
          ],
          adaptacionesPR: [
            'Incluir elementos de identidad boricua (bandera, coquÃ­, platos favoritos)',
            'Conectar con municipio de origen o comunidad',
            'Usar mÃºsica de fondo puertorriqueÃ±a mientras trabajan'
          ],
          conexionCurriculo: 'Arte (autorretrato), EspaÃ±ol (narrativa personal), Salud (autoconocimiento, identidad)'
        }
      }
    ],
    idear: [
      {
        id: 'seis-sombreros',
        nombre: 'ğŸ© Los Seis Sombreros para Pensar',
        importancia: 'Esta tÃ©cnica de Edward de Bono es revolucionaria porque separa los diferentes tipos de pensamiento. Normalmente, cuando pensamos en un problema, mezclamos emociones, datos, creatividad y crÃ­tica todo a la vez - lo que genera confusiÃ³n y conflicto. Los Seis Sombreros nos permiten "ponernos" un tipo de pensamiento a la vez, haciendo el proceso mÃ¡s ordenado y productivo. Todos pueden ser creativos, todos pueden ser crÃ­ticos - solo en momentos diferentes.',
        porqueIntegrar: 'Porque en nuestras aulas (y en la vida) tendemos a tener "roles fijos": el estudiante pesimista, el optimista ingenuo, el que solo quiere datos. Esta tÃ©cnica libera a todos de sus roles habituales y permite que el pesimista sea creativo y el soÃ±ador sea analÃ­tico. AdemÃ¡s, enseÃ±a metacogniciÃ³n - los estudiantes aprenden a identificar QUÃ‰ tipo de pensamiento estÃ¡n usando.',
        sombreros: [
          { color: 'âšª', nombre: 'Blanco', enfoque: 'Datos y hechos', pregunta: 'Â¿QuÃ© informaciÃ³n tenemos? Â¿QuÃ© nos falta saber?', ejemplo: '"Tenemos 30 estudiantes, 45 minutos de clase, y 5 computadoras"' },
          { color: 'ğŸ”´', nombre: 'Rojo', enfoque: 'Emociones e intuiciÃ³n', pregunta: 'Â¿QuÃ© siento al respecto? Â¿CuÃ¡l es mi instinto?', ejemplo: '"Siento que esto va a ser difÃ­cil pero emocionante"' },
          { color: 'âš«', nombre: 'Negro', enfoque: 'CrÃ­tica y riesgos', pregunta: 'Â¿QuÃ© podrÃ­a salir mal? Â¿CuÃ¡les son los obstÃ¡culos?', ejemplo: '"Si llueve, no podremos usar el patio"' },
          { color: 'ğŸŸ¡', nombre: 'Amarillo', enfoque: 'Optimismo y beneficios', pregunta: 'Â¿QuÃ© ventajas tiene? Â¿Por quÃ© funcionarÃ­a?', ejemplo: '"Los estudiantes se motivarÃ­an mÃ¡s con algo prÃ¡ctico"' },
          { color: 'ğŸŸ¢', nombre: 'Verde', enfoque: 'Creatividad y alternativas', pregunta: 'Â¿QuÃ© mÃ¡s podrÃ­amos hacer? Â¿Y si...?', ejemplo: '"Â¿Y si los estudiantes enseÃ±aran ellos?"' },
          { color: 'ğŸ”µ', nombre: 'Azul', enfoque: 'Control y proceso', pregunta: 'Â¿CÃ³mo organizamos esto? Â¿CuÃ¡l es el siguiente paso?', ejemplo: '"Primero definamos el objetivo, luego los recursos"' }
        ],
        actividadTaller: {
          nombre: 'ğŸ© "Pensando con Sombreros"',
          objetivo: 'Experimentar cÃ³mo los diferentes tipos de pensamiento generan perspectivas mÃ¡s ricas y completas',
          duracion: '35 minutos',
          materiales: 'Tarjetas o papeles de 6 colores (blanco, rojo, negro, amarillo, verde, azul), timer, pizarra o papelÃ³grafo',
          instrucciones: [
            'DivÃ­danse en grupos de 6 (o menos, rotando sombreros)',
            'Cada persona recibe un "sombrero" (tarjeta de color)',
            'Presenta el problema: "Â¿CÃ³mo podemos hacer las clases mÃ¡s interactivas con recursos limitados?"',
            'Ronda 1: Cada persona habla SOLO desde su sombrero (2 min por persona)',
            'Ronda 2: Intercambien sombreros y repitan con el mismo problema',
            'Ronda 3: Sin sombreros - discusiÃ³n libre integrando perspectivas',
            'ReflexiÃ³n grupal: Â¿QuÃ© sombrero les costÃ³ mÃ¡s? Â¿CuÃ¡l descubrieron que usan poco?'
          ],
          reglasDelJuego: [
            'Cuando tienes un sombrero, SOLO puedes pensar desde esa perspectiva',
            'No hay sombreros "buenos" o "malos" - todos son necesarios',
            'El sombrero negro NO es ser negativo - es identificar riesgos reales',
            'El sombrero rojo permite decir "no me gusta" sin justificar',
            'El facilitador puede pedir "todos sombrero verde" para forzar creatividad'
          ],
          reflexionGuia: 'Â¿QuÃ© sombrero usas mÃ¡s en tu vida diaria? Â¿CuÃ¡l necesitas practicar mÃ¡s?'
        },
        actividadEstudiantes: {
          nombre: 'ğŸ© "El Consejo de los Sombreros"',
          nivel: 'Elemental, Intermedio, Superior',
          objetivo: 'EnseÃ±ar a los estudiantes a pensar desde mÃºltiples perspectivas de forma estructurada',
          duracion: '45 minutos',
          materiales: 'Sombreros de papel de colores (pueden hacerse con cartulina), tarjetas con los roles, problema a resolver',
          instrucciones: [
            'Crea sombreros de papel de 6 colores (actividad previa divertida)',
            'Presenta un problema real de la clase/escuela/comunidad',
            'Asigna sombreros a grupos o individuos',
            'Cada "sombrero" tiene 3 minutos para dar su perspectiva',
            'Usa un "GuardiÃ¡n del sombrero azul" que organiza los turnos',
            'Al final, juntos deciden la mejor soluciÃ³n combinando perspectivas'
          ],
          variaciones: [
            'Elemental: Solo usar 4 sombreros (blanco=datos, rojo=sentimientos, verde=ideas, amarillo=lo bueno)',
            'Intermedio: Rotar sombreros para que todos experimenten cada perspectiva',
            'Superior: Usar para analizar literatura, eventos histÃ³ricos, o dilemas Ã©ticos'
          ],
          ejemplosProblemas: [
            'Â¿CÃ³mo mejorar el recreo/almuerzo?',
            'Â¿CÃ³mo reducir el bullying?',
            'Â¿QuÃ© hacer con el jardÃ­n abandonado de la escuela?',
            'Â¿CÃ³mo ayudar a estudiantes nuevos a integrarse?'
          ],
          conexionCurriculo: 'EspaÃ±ol (argumentaciÃ³n), Ciencias (mÃ©todo cientÃ­fico), Estudios Sociales (anÃ¡lisis), Ã‰tica (perspectivas mÃºltiples)'
        }
      }
    ]
  };

  const phases = [
    {
      id: 'empatizar',
      number: '1',
      title: 'â¤ï¸ EMPATIZAR',
      subtitle: 'Conectar con las necesidades reales',
      color: '#E11D48',
      lightColor: '#FFF1F2',
      importancia: 'Sin empatÃ­a, diseÃ±amos soluciones para problemas que imaginamos, no para los que realmente existen. En Puerto Rico, donde cada comunidad escolar tiene realidades Ãºnicas (desde Vieques hasta MayagÃ¼ez), empatizar es esencial.',
      porqueIntegrar: 'Porque nuestros estudiantes no son nÃºmeros - son personas con historias, luchas y sueÃ±os. Cuando entendemos su contexto (trabajan despuÃ©s de clases, cuidan hermanos, viven sin internet estable), podemos diseÃ±ar experiencias de aprendizaje que realmente funcionen para ellos.',
      actividadTaller: {
        nombre: 'ğŸ­ "Un DÃ­a en Sus Zapatos"',
        objetivo: 'Experimentar la realidad de diferentes estudiantes puertorriqueÃ±os',
        duracion: '20 minutos',
        materiales: 'Tarjetas de perfil (se pueden hacer con post-its), papel, marcadores',
        instrucciones: [
          'Formen grupos de 4 personas',
          'Cada persona toma una tarjeta con un perfil de estudiante diferente',
          'Durante 5 minutos, escriban cÃ³mo serÃ­a un dÃ­a escolar desde esa perspectiva',
          'Compartan en grupo: Â¿QuÃ© obstÃ¡culos enfrenta? Â¿QuÃ© necesita?',
          'Identifiquen patrones comunes entre los perfiles'
        ],
        perfiles: [
          'ğŸ‘§ Estudiante que trabaja en el negocio familiar despuÃ©s de clases',
          'ğŸ‘¦ Estudiante que cuida a sus hermanitos mientras mamÃ¡ trabaja doble turno',
          'ğŸ‘© Estudiante sin internet estable en casa (solo datos limitados)',
          'ğŸ‘¨ Estudiante con TDAH que lucha por mantenerse enfocado',
          'ğŸ‘§ Estudiante que vive en zona rural y viaja 1 hora a la escuela'
        ],
        reflexionGuia: 'Â¿CuÃ¡ntas de estas realidades existen en tu salÃ³n sin que lo sepas?'
      },
      actividadEstudiantes: {
        nombre: 'ğŸ” "Detective de Necesidades"',
        nivel: 'Elemental, Intermedio, Superior',
        objetivo: 'Que los estudiantes practiquen empatÃ­a investigando necesidades reales',
        duracion: '45 minutos (puede dividirse en 2 sesiones)',
        materiales: 'Papel, lÃ¡pices, post-its',
        instrucciones: [
          'Presenta el reto: "Vamos a mejorar algo de nuestra escuela/comunidad"',
          'Los estudiantes eligen a quiÃ©n entrevistar (otro estudiante, personal escolar, familiar)',
          'Usan 3 preguntas clave: Â¿QuÃ© te frustra? Â¿QuÃ© desearÃ­as? Â¿QuÃ© te harÃ­a mÃ¡s feliz?',
          'Documentan respuestas en un "Mapa de EmpatÃ­a" simple',
          'Comparten hallazgos con la clase'
        ],
        variaciones: [
          'Elemental: Dibujar las respuestas en lugar de escribirlas',
          'Intermedio: Crear un perfil de usuario con foto/dibujo',
          'Superior: Hacer entrevistas grabadas en video (1 minuto)'
        ],
        conexionCurriculo: 'EspaÃ±ol (entrevistas), Estudios Sociales (comunidad), Ciencias (observaciÃ³n)'
      }
    },
    {
      id: 'definir',
      number: '2',
      title: 'ğŸ¯ DEFINIR',
      subtitle: 'Enfocar el problema correctamente',
      color: '#F59E0B',
      lightColor: '#FFFBEB',
      importancia: 'Si defines mal el problema, todas tus soluciones irÃ¡n en la direcciÃ³n equivocada. Es como medicar sÃ­ntomas sin diagnosticar la enfermedad. La fase de definir nos obliga a ir mÃ¡s profundo.',
      porqueIntegrar: 'Porque muchas veces en educaciÃ³n tratamos sÃ­ntomas ("los estudiantes no prestan atenciÃ³n") sin entender causas ("las clases no conectan con sus intereses"). Definir bien nos ahorra tiempo y esfuerzo implementando soluciones que no funcionarÃ¡n.',
      actividadTaller: {
        nombre: 'ğŸ” "Los 5 Por QuÃ©s en AcciÃ³n"',
        objetivo: 'Practicar la tÃ©cnica para llegar a la raÃ­z de los problemas educativos',
        duracion: '25 minutos',
        materiales: 'Papel grande o pizarra, marcadores',
        instrucciones: [
          'En parejas, uno elige un problema real de su aula',
          'El compaÃ±ero pregunta "Â¿Por quÃ©?" - el otro responde',
          'Repiten la pregunta "Â¿Por quÃ©?" ante cada respuesta (5 veces)',
          'Documentan la cadena de respuestas',
          'Identifican: Â¿CuÃ¡l es la causa raÃ­z? Â¿QuÃ© pueden controlar?',
          'Intercambian roles y repiten'
        ],
        ejemplo: {
          problema: 'Los estudiantes no completan las tareas',
          cadena: [
            'P1: Â¿Por quÃ©? â†’ No las hacen en casa',
            'P2: Â¿Por quÃ©? â†’ No tienen quien les ayude',
            'P3: Â¿Por quÃ©? â†’ Padres trabajan turnos largos',
            'P4: Â¿Por quÃ©? â†’ Necesidad econÃ³mica familiar',
            'P5: Â¿Por quÃ©? â†’ SituaciÃ³n econÃ³mica de PR'
          ],
          insight: 'No es irresponsabilidad - es falta de apoyo. Â¿SoluciÃ³n? Tiempo en clase para tareas, tutorÃ­as entre pares, tareas que no requieran ayuda externa.'
        },
        reflexionGuia: 'Â¿QuÃ© "verdades" sobre tus estudiantes has asumido sin verificar?'
      },
      actividadEstudiantes: {
        nombre: 'ğŸ¯ "De Queja a MisiÃ³n"',
        nivel: 'Elemental, Intermedio, Superior',
        objetivo: 'EnseÃ±ar a convertir quejas en oportunidades de mejora',
        duracion: '30 minutos',
        materiales: 'Post-its (2 colores), papel grande',
        instrucciones: [
          'En post-its ROJOS, cada estudiante escribe 3 quejas sobre la escuela/clase/comunidad',
          'Pegan todos los post-its en la pizarra',
          'En grupos, agrupan quejas similares',
          'Por cada grupo de quejas, escriben en post-it VERDE: "Â¿CÃ³mo podrÃ­amos...?" (HMW)',
          'Votan cuÃ¡l problema/oportunidad quieren resolver'
        ],
        ejemplosTransformacion: [
          { queja: 'El almuerzo es muy corto', oportunidad: 'Â¿CÃ³mo podrÃ­amos hacer el tiempo de almuerzo mÃ¡s valioso?' },
          { queja: 'Los baÃ±os estÃ¡n sucios', oportunidad: 'Â¿CÃ³mo podrÃ­amos mantener los baÃ±os limpios entre todos?' },
          { queja: 'La clase de matemÃ¡ticas es aburrida', oportunidad: 'Â¿CÃ³mo podrÃ­amos hacer matemÃ¡ticas mÃ¡s interesante?' }
        ],
        variaciones: [
          'Elemental: Usar dibujos en lugar de palabras',
          'Intermedio: Escribir el "Â¿CÃ³mo podrÃ­amos...?" como grupo',
          'Superior: AÃ±adir criterios (Â¿Es importante? Â¿Podemos cambiarlo?)'
        ],
        conexionCurriculo: 'EspaÃ±ol (redacciÃ³n), CiudadanÃ­a, Proyecto de Servicio Comunitario'
      }
    },
    {
      id: 'idear',
      number: '3',
      title: 'ğŸ’¡ IDEAR',
      subtitle: 'Generar soluciones creativas',
      color: '#10B981',
      lightColor: '#ECFDF5',
      importancia: 'La primera idea casi nunca es la mejor. Idear nos fuerza a generar muchas opciones antes de enamorarnos de una sola. La creatividad es un mÃºsculo - se entrena con prÃ¡ctica.',
      porqueIntegrar: 'Porque nuestros estudiantes (y nosotros) tendemos a quedarnos con la primera soluciÃ³n. En un mundo que cambia rÃ¡pido, necesitamos personas que puedan generar mÃºltiples alternativas y pensar "fuera de la caja".',
      actividadTaller: {
        nombre: 'ğŸ§  "Tormenta Loca + SCAMPER"',
        objetivo: 'Generar al menos 20 ideas sin juzgarlas usando tÃ©cnicas estructuradas',
        duracion: '30 minutos',
        materiales: 'Muchos post-its, marcadores gruesos, timer, papel grande',
        instrucciones: [
          'REGLAS: No juzgar, cantidad sobre calidad, ideas locas bienvenidas, construir sobre otros',
          'Fase 1 (8 min): Tormenta libre - una idea por post-it, pegar sin discutir',
          'Fase 2 (10 min): Aplicar SCAMPER a las mejores ideas',
          'Fase 3 (7 min): Votar las 3 mÃ¡s prometedoras con puntos adhesivos',
          'Fase 4 (5 min): Refinar la idea ganadora en grupo'
        ],
        scamper: [
          { letra: 'S', palabra: 'Sustituir', ejemplo: 'Â¿Y si en vez de tarea escrita fuera un audio de 1 minuto?' },
          { letra: 'C', palabra: 'Combinar', ejemplo: 'Â¿Y si combinamos matemÃ¡ticas con el tema favorito del estudiante?' },
          { letra: 'A', palabra: 'Adaptar', ejemplo: 'Â¿QuÃ© hacen los videojuegos para mantener enganchados? Â¿Podemos adaptarlo?' },
          { letra: 'M', palabra: 'Modificar', ejemplo: 'Â¿Y si la clase durara 15 min con descansos vs 50 min corridos?' },
          { letra: 'P', palabra: 'Proponer otros usos', ejemplo: 'Â¿Y si el celular fuera herramienta de aprendizaje, no distracciÃ³n?' },
          { letra: 'E', palabra: 'Eliminar', ejemplo: 'Â¿QuÃ© pasarÃ­a si eliminamos las notas por un mes?' },
          { letra: 'R', palabra: 'Reorganizar', ejemplo: 'Â¿Y si los estudiantes enseÃ±aran un tema a sus compaÃ±eros?' }
        ],
        reflexionGuia: 'Â¿CuÃ¡l de las ideas "locas" tiene un grano de genialidad?'
      },
      actividadEstudiantes: {
        nombre: 'ğŸ’¡ "100 Ideas en 10 Minutos"',
        nivel: 'Elemental, Intermedio, Superior',
        objetivo: 'Entrenar el mÃºsculo creativo generando muchas ideas rÃ¡pidamente',
        duracion: '25 minutos',
        materiales: 'Papel, lÃ¡pices, timer visible, mÃºsica energÃ©tica (opcional)',
        instrucciones: [
          'Presenta el reto/problema definido en la fase anterior',
          'Reglas: TODA idea vale, no criticar, cantidad importa, pueden dibujar',
          'Timer de 10 minutos - objetivo grupal: Â¡100 ideas entre todos!',
          'Cada idea en un papelito separado',
          'Al terminar, pegan todas en la pared y buscan las mÃ¡s creativas',
          'Votan las favoritas con stickers o marcas'
        ],
        variaciones: [
          'Elemental: Meta de 30 ideas, pueden ser dibujos',
          'Intermedio: AÃ±adir categorÃ­as (tecnologÃ­a, naturaleza, arte)',
          'Superior: Incluir anÃ¡lisis de viabilidad despuÃ©s'
        ],
        tips: [
          'Pon mÃºsica de fondo para energizar',
          'Celebra las ideas mÃ¡s locas',
          'Si se estancan, da un "wildcard": "Â¿Y si pudieras usar magia?"'
        ],
        conexionCurriculo: 'Cualquier materia - adaptar el reto al contenido curricular'
      }
    },
    {
      id: 'prototipar',
      number: '4',
      title: 'ğŸ”§ PROTOTIPAR',
      subtitle: 'Hacer tangibles las ideas',
      color: '#8B5CF6',
      lightColor: '#F5F3FF',
      importancia: 'Las ideas en la cabeza parecen perfectas. Al construirlas, descubrimos problemas que no habÃ­amos imaginado. Prototipar es "pensar con las manos" - es mÃ¡s barato fallar con cartÃ³n que con recursos reales.',
      porqueIntegrar: 'Porque enseÃ±amos en abstracto demasiado tiempo. Cuando los estudiantes CONSTRUYEN algo, el aprendizaje se hace memorable. AdemÃ¡s, les preparamos para un mundo donde crear y iterar es mÃ¡s valioso que memorizar.',
      actividadTaller: {
        nombre: 'ğŸ—ï¸ "Prototipo en 15 Minutos"',
        objetivo: 'Crear una versiÃ³n tangible de la soluciÃ³n usando materiales simples',
        duracion: '25 minutos',
        materiales: 'Cartulina, papel, tijeras, pegamento, marcadores, post-its, materiales reciclados',
        instrucciones: [
          'Elige la idea ganadora de la fase anterior',
          'Decide quÃ© tipo de prototipo: Storyboard, Maqueta, Role-play script, o Prototipo de papel',
          'Timer de 15 minutos - Â¡construir sin perfeccionar!',
          'Mantra: "Si no te da un poco de vergÃ¼enza, esperaste mucho"',
          'Prepara una explicaciÃ³n de 1 minuto de tu prototipo'
        ],
        tiposPrototipo: [
          { tipo: 'ğŸ“– Storyboard', desc: '6 cuadros dibujados mostrando la experiencia paso a paso', cuando: 'Para procesos, rutinas, experiencias' },
          { tipo: 'ğŸ  Maqueta', desc: 'VersiÃ³n fÃ­sica 3D simplificada', cuando: 'Para espacios, objetos, estaciones' },
          { tipo: 'ğŸ¬ Role-play', desc: 'GuiÃ³n y actuaciÃ³n de cÃ³mo se usarÃ­a', cuando: 'Para interacciones, servicios, dinÃ¡micas' },
          { tipo: 'ğŸ“± Pantallas de papel', desc: 'Dibujos de interfaces como si fueran reales', cuando: 'Para apps, presentaciones, materiales digitales' }
        ],
        reflexionGuia: 'Â¿QuÃ© descubriste al construir que no habÃ­as pensado antes?'
      },
      actividadEstudiantes: {
        nombre: 'ğŸ¨ "Construye tu SoluciÃ³n"',
        nivel: 'Elemental, Intermedio, Superior',
        objetivo: 'Materializar ideas en prototipos tangibles con materiales accesibles',
        duracion: '45 minutos',
        materiales: 'CartÃ³n, papel, tijeras, pegamento, colores, materiales reciclados, plastilina',
        instrucciones: [
          'Recuerda: Un prototipo NO es el producto final - es para aprender',
          'Cada grupo elige cÃ³mo representar su idea (ver opciones)',
          'Tienen 30 minutos para construir',
          'Los Ãºltimos 15 minutos: preparar cÃ³mo lo explicarÃ¡n',
          'Criterio de Ã©xito: Â¿Se entiende la idea al verlo?'
        ],
        opciones: [
          'Elemental: Dibujo grande, maqueta con plastilina, teatrito',
          'Intermedio: Storyboard, maqueta con cartÃ³n, video corto en celular',
          'Superior: Prototipo de app en papel, presentaciÃ³n tipo pitch, demo funcional simple'
        ],
        ejemplos: [
          'SoluciÃ³n: "Sistema de puntos positivos" â†’ Prototipo: Cartulina con el diseÃ±o del tablero',
          'SoluciÃ³n: "App para recordar tareas" â†’ Prototipo: Pantallas dibujadas en papel',
          'SoluciÃ³n: "RincÃ³n de calma en el salÃ³n" â†’ Prototipo: Maqueta 3D con caja de zapatos'
        ],
        conexionCurriculo: 'Arte, Ciencias (proyectos), TecnologÃ­a, MatemÃ¡ticas (medidas)'
      }
    },
    {
      id: 'probar',
      number: '5',
      title: 'âœ… PROBAR',
      subtitle: 'Aprender de la retroalimentaciÃ³n',
      color: '#0EA5E9',
      lightColor: '#F0F9FF',
      importancia: 'La Ãºnica forma de saber si algo funciona es probÃ¡ndolo con usuarios reales. La retroalimentaciÃ³n no es crÃ­tica personal - es informaciÃ³n invaluable para mejorar.',
      porqueIntegrar: 'Porque enseÃ±amos a los estudiantes a tener miedo al error. Design Thinking reencuadra el "fracaso" como aprendizaje. Probar nos enseÃ±a humildad intelectual y mejora continua.',
      actividadTaller: {
        nombre: 'ğŸ”„ "Speed Testing entre Colegas"',
        objetivo: 'Obtener retroalimentaciÃ³n rÃ¡pida y estructurada de mÃºltiples personas',
        duracion: '25 minutos',
        materiales: 'Prototipos creados, hojas para notas, timer',
        instrucciones: [
          'Formen dos filas, uno frente a otro',
          'Ronda 1: Fila A presenta prototipo (2 min), Fila B da feedback (2 min)',
          'Usa la tÃ©cnica: "Me gusta... / Deseo... / Â¿Y si...?"',
          'Rotar: Fila B se mueve un puesto a la derecha',
          'Repetir 3-4 veces con diferentes personas',
          'Al final: Documentar patrones en el feedback recibido'
        ],
        tecnicaFeedback: [
          { tipo: 'ğŸ‘ Me gusta...', desc: 'Lo que funciona bien', ejemplo: '"Me gusta que es visual y fÃ¡cil de entender"' },
          { tipo: 'ğŸ’­ Deseo...', desc: 'Lo que podrÃ­a mejorar', ejemplo: '"Deseo que incluyera opciones para estudiantes visuales"' },
          { tipo: 'ğŸ’¡ Â¿Y si...?', desc: 'Sugerencias creativas', ejemplo: '"Â¿Y si aÃ±adieras una versiÃ³n digital?"' }
        ],
        reflexionGuia: 'Â¿QuÃ© patrÃ³n de feedback se repitiÃ³? Â¿QuÃ© cambiarÃ¡s basado en esto?'
      },
      actividadEstudiantes: {
        nombre: 'ğŸ¤ "Feria de Prototipos"',
        nivel: 'Elemental, Intermedio, Superior',
        objetivo: 'Presentar soluciones y recibir retroalimentaciÃ³n real de diferentes audiencias',
        duracion: '45-60 minutos',
        materiales: 'Prototipos, mesas/estaciones, hojas de feedback, stickers para votar',
        instrucciones: [
          'Montar estaciones con cada prototipo expuesto',
          'La mitad de la clase presenta, la otra mitad visita estaciones (luego rotan)',
          'Visitantes dejan feedback escrito usando "Me gusta / Deseo / Â¿Y si...?"',
          'Pueden invitar a otros grupos, maestros, o familias como "jueces"',
          'Al final, cada grupo lee su feedback y planifica UNA mejora'
        ],
        variaciones: [
          'Elemental: Feedback con caritas (ğŸ˜Š me gusta, ğŸ¤” y si..., â­ lo mejor)',
          'Intermedio: AÃ±adir votaciÃ³n con stickers para "MÃ¡s creativo", "MÃ¡s Ãºtil"',
          'Superior: Incluir preguntas difÃ­ciles tipo "Shark Tank" de parte de invitados'
        ],
        invitados: [
          'Otros maestros de la escuela',
          'Director/a o personal administrativo',
          'Padres o encargados',
          'Estudiantes de otros grados',
          'Miembros de la comunidad'
        ],
        conexionCurriculo: 'EspaÃ±ol (presentaciÃ³n oral), Ciencias (mÃ©todo cientÃ­fico), Estudios Sociales (civismo)'
      }
    }
  ];

  const styles = {
    container: { fontFamily: 'system-ui, -apple-system, sans-serif', maxWidth: '950px', margin: '0 auto', padding: '16px', backgroundColor: '#F8FAFC', minHeight: '100vh' },
    header: { background: 'linear-gradient(135deg, #1E40AF 0%, #7C3AED 50%, #DB2777 100%)', color: 'white', borderRadius: '20px', padding: '28px', marginBottom: '24px', textAlign: 'center', boxShadow: '0 10px 40px rgba(124, 58, 237, 0.3)' },
    phaseNav: { display: 'flex', gap: '8px', justifyContent: 'center', flexWrap: 'wrap', margin: '20px 0' },
    phaseNavBtn: { padding: '8px 16px', borderRadius: '20px', border: 'none', cursor: 'pointer', fontWeight: 'bold', fontSize: '14px', transition: 'all 0.2s' },
    section: { marginBottom: '20px' },
    sectionButton: { width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '18px 20px', background: 'linear-gradient(135deg, #2563EB, #4F46E5)', color: 'white', border: 'none', borderRadius: '12px', cursor: 'pointer', fontSize: '17px', fontWeight: 'bold', boxShadow: '0 4px 15px rgba(37, 99, 235, 0.3)', transition: 'all 0.2s' },
    sectionContent: { marginTop: '12px', padding: '24px', backgroundColor: 'white', borderRadius: '12px', border: '1px solid #E5E7EB', boxShadow: '0 2px 10px rgba(0,0,0,0.05)' },
    card: { backgroundColor: '#F8FAFC', padding: '20px', borderRadius: '12px', marginBottom: '16px', border: '1px solid #E2E8F0' },
    importanceBox: { background: 'linear-gradient(135deg, #FEF3C7, #FDE68A)', padding: '20px', borderRadius: '12px', marginBottom: '16px', borderLeft: '5px solid #F59E0B' },
    whyBox: { background: 'linear-gradient(135deg, #D1FAE5, #A7F3D0)', padding: '20px', borderRadius: '12px', marginBottom: '16px', borderLeft: '5px solid #10B981' },
    activityBox: { backgroundColor: 'white', padding: '20px', borderRadius: '12px', marginBottom: '16px', border: '2px solid', boxShadow: '0 4px 15px rgba(0,0,0,0.08)' },
    checkbox: { width: '20px', height: '20px', marginRight: '12px', cursor: 'pointer', accentColor: '#10B981' },
    textarea: { width: '100%', padding: '12px', borderRadius: '8px', border: '2px solid #E2E8F0', fontSize: '14px', resize: 'vertical', minHeight: '80px', fontFamily: 'inherit', boxSizing: 'border-box' },
    stepItem: { display: 'flex', alignItems: 'flex-start', padding: '10px', borderRadius: '8px', marginBottom: '8px', backgroundColor: '#F8FAFC', cursor: 'pointer', transition: 'all 0.2s' },
    tag: { display: 'inline-block', padding: '4px 12px', borderRadius: '20px', fontSize: '12px', fontWeight: 'bold', marginRight: '8px' },
    tecnicaBtn: { width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '16px', backgroundColor: '#FDF4FF', border: '2px solid #E879F9', borderRadius: '12px', cursor: 'pointer', marginBottom: '12px', transition: 'all 0.2s' }
  };

  const renderTecnicaAdicional = (tecnica, phaseColor) => (
    <div key={tecnica.id} style={{ marginTop: '24px', borderTop: '3px dashed #E879F9', paddingTop: '24px' }}>
      <button
        onClick={() => setActiveTecnica(activeTecnica === tecnica.id ? null : tecnica.id)}
        style={styles.tecnicaBtn}
      >
        <div>
          <span style={{ fontSize: '20px', fontWeight: 'bold', color: '#A21CAF' }}>{tecnica.nombre}</span>
          <span style={{ ...styles.tag, backgroundColor: '#F3E8FF', color: '#7C3AED', marginLeft: '12px' }}>âœ¨ TÃ‰CNICA ADICIONAL</span>
        </div>
        <span style={{ fontSize: '20px', color: '#A21CAF' }}>{activeTecnica === tecnica.id ? 'â–²' : 'â–¼'}</span>
      </button>

      {activeTecnica === tecnica.id && (
        <div style={{ backgroundColor: '#FEFBFF', padding: '20px', borderRadius: '12px', border: '1px solid #F3E8FF' }}>
          <div style={styles.importanceBox}>
            <h3 style={{ color: '#92400E', marginBottom: '10px' }}>ğŸŒŸ Â¿Por quÃ© es IMPORTANTE esta tÃ©cnica?</h3>
            <p style={{ color: '#78350F', lineHeight: '1.7' }}>{tecnica.importancia}</p>
          </div>

          <div style={styles.whyBox}>
            <h3 style={{ color: '#065F46', marginBottom: '10px' }}>ğŸ’¡ Â¿Por quÃ© DEBES integrarla?</h3>
            <p style={{ color: '#047857', lineHeight: '1.7' }}>{tecnica.porqueIntegrar}</p>
          </div>

          {tecnica.sombreros && (
            <div style={{ backgroundColor: '#F8FAFC', padding: '20px', borderRadius: '12px', marginBottom: '16px' }}>
              <h4 style={{ color: '#1F2937', marginBottom: '16px', fontSize: '18px' }}>ğŸ© Los Seis Sombreros Explicados:</h4>
              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))', gap: '12px' }}>
                {tecnica.sombreros.map((s, i) => (
                  <div key={i} style={{ backgroundColor: 'white', padding: '16px', borderRadius: '10px', border: '2px solid #E5E7EB' }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '8px' }}>
                      <span style={{ fontSize: '28px' }}>{s.color}</span>
                      <span style={{ fontWeight: 'bold', fontSize: '16px', color: '#1F2937' }}>Sombrero {s.nombre}</span>
                    </div>
                    <p style={{ color: '#4B5563', marginBottom: '8px', fontSize: '14px' }}><strong>Enfoque:</strong> {s.enfoque}</p>
                    <p style={{ color: '#6B7280', marginBottom: '8px', fontSize: '13px' }}><strong>Pregunta:</strong> {s.pregunta}</p>
                    <p style={{ color: '#9CA3AF', fontSize: '12px', fontStyle: 'italic', backgroundColor: '#F9FAFB', padding: '8px', borderRadius: '6px' }}>{s.ejemplo}</p>
                  </div>
                ))}
              </div>
            </div>
          )}

          <div style={{ ...styles.activityBox, borderColor: '#A21CAF' }}>
            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px', flexWrap: 'wrap' }}>
              <span style={{ ...styles.tag, backgroundColor: '#A21CAF', color: 'white' }}>ğŸ‘¨â€ğŸ« ACTIVIDAD PARA EL TALLER</span>
              <span style={{ ...styles.tag, backgroundColor: '#F3E8FF', color: '#7C3AED' }}>â±ï¸ {tecnica.actividadTaller.duracion}</span>
            </div>

            <h3 style={{ color: '#A21CAF', marginBottom: '8px', fontSize: '20px' }}>{tecnica.actividadTaller.nombre}</h3>
            <p style={{ color: '#4B5563', marginBottom: '16px' }}><strong>Objetivo:</strong> {tecnica.actividadTaller.objetivo}</p>
            <p style={{ color: '#6B7280', marginBottom: '16px', fontSize: '14px' }}>ğŸ“¦ <strong>Materiales:</strong> {tecnica.actividadTaller.materiales}</p>

            <div style={{ backgroundColor: 'white', padding: '16px', borderRadius: '10px', marginBottom: '16px', border: '1px solid #F3E8FF' }}>
              <h4 style={{ color: '#1F2937', marginBottom: '12px' }}>ğŸ“‹ Instrucciones:</h4>
              {tecnica.actividadTaller.instrucciones.map((step, idx) => (
                <div
                  key={idx}
                  onClick={() => toggleStep(`taller-${tecnica.id}`, idx)}
                  style={{
                    ...styles.stepItem,
                    backgroundColor: completedSteps[`taller-${tecnica.id}-${idx}`] ? '#F3E8FF' : '#F9FAFB',
                    textDecoration: completedSteps[`taller-${tecnica.id}-${idx}`] ? 'line-through' : 'none'
                  }}
                >
                  <input
                    type="checkbox"
                    checked={completedSteps[`taller-${tecnica.id}-${idx}`] || false}
                    onChange={() => {}}
                    style={{ ...styles.checkbox, accentColor: '#A21CAF' }}
                  />
                  <span style={{ color: completedSteps[`taller-${tecnica.id}-${idx}`] ? '#9CA3AF' : '#1F2937' }}>
                    {idx + 1}. {step}
                  </span>
                </div>
              ))}
            </div>

            {tecnica.actividadTaller.variaciones && (
              <div style={{ backgroundColor: '#FEF3C7', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                <h4 style={{ color: '#92400E', marginBottom: '10px' }}>ğŸšï¸ Variaciones:</h4>
                {tecnica.actividadTaller.variaciones.map((v, i) => (
                  <p key={i} style={{ color: '#78350F', marginBottom: '6px', fontSize: '14px' }}>â€¢ {v}</p>
                ))}
              </div>
            )}

            {tecnica.actividadTaller.reglasDelJuego && (
              <div style={{ backgroundColor: '#DBEAFE', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                <h4 style={{ color: '#1E40AF', marginBottom: '10px' }}>ğŸ“œ Reglas del Juego:</h4>
                {tecnica.actividadTaller.reglasDelJuego.map((r, i) => (
                  <p key={i} style={{ color: '#1E3A8A', marginBottom: '6px', fontSize: '14px' }}>âœ“ {r}</p>
                ))}
              </div>
            )}

            <div style={{ backgroundColor: '#FEF9C3', padding: '16px', borderRadius: '10px', borderLeft: '4px solid #F59E0B' }}>
              <h4 style={{ color: '#92400E', marginBottom: '8px' }}>ğŸ’­ Pregunta de ReflexiÃ³n:</h4>
              <p style={{ color: '#78350F', fontStyle: 'italic' }}>{tecnica.actividadTaller.reflexionGuia}</p>
            </div>

            <div style={{ marginTop: '16px' }}>
              <h4 style={{ color: '#374151', marginBottom: '8px' }}>ğŸ“ Mis notas:</h4>
              <textarea
                style={{ ...styles.textarea, borderColor: '#F3E8FF' }}
                placeholder="Escribe aquÃ­ tus reflexiones..."
                value={notes[`taller-${tecnica.id}`] || ''}
                onChange={(e) => updateNote(`taller-${tecnica.id}`, e.target.value)}
              />
            </div>
          </div>

          <div style={{ ...styles.activityBox, borderColor: '#3B82F6', background: 'linear-gradient(to bottom, #EFF6FF, white)' }}>
            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px', flexWrap: 'wrap' }}>
              <span style={{ ...styles.tag, backgroundColor: '#3B82F6', color: 'white' }}>ğŸ‘¨â€ğŸ“ ACTIVIDAD PARA TUS ESTUDIANTES</span>
              <span style={{ ...styles.tag, backgroundColor: '#DBEAFE', color: '#1E40AF' }}>â±ï¸ {tecnica.actividadEstudiantes.duracion}</span>
              <span style={{ ...styles.tag, backgroundColor: '#FEE2E2', color: '#991B1B' }}>ğŸ“Š {tecnica.actividadEstudiantes.nivel}</span>
            </div>

            <h3 style={{ color: '#1E40AF', marginBottom: '8px', fontSize: '20px' }}>{tecnica.actividadEstudiantes.nombre}</h3>
            <p style={{ color: '#4B5563', marginBottom: '16px' }}><strong>Objetivo:</strong> {tecnica.actividadEstudiantes.objetivo}</p>
            <p style={{ color: '#6B7280', marginBottom: '16px', fontSize: '14px' }}>ğŸ“¦ <strong>Materiales:</strong> {tecnica.actividadEstudiantes.materiales}</p>

            <div style={{ backgroundColor: 'white', padding: '16px', borderRadius: '10px', marginBottom: '16px', border: '1px solid #BFDBFE' }}>
              <h4 style={{ color: '#1F2937', marginBottom: '12px' }}>ğŸ“‹ Instrucciones:</h4>
              {tecnica.actividadEstudiantes.instrucciones.map((step, idx) => (
                <div
                  key={idx}
                  onClick={() => toggleStep(`estudiantes-${tecnica.id}`, idx)}
                  style={{
                    ...styles.stepItem,
                    backgroundColor: completedSteps[`estudiantes-${tecnica.id}-${idx}`] ? '#DBEAFE' : '#F9FAFB'
                  }}
                >
                  <input
                    type="checkbox"
                    checked={completedSteps[`estudiantes-${tecnica.id}-${idx}`] || false}
                    onChange={() => {}}
                    style={{ ...styles.checkbox, accentColor: '#3B82F6' }}
                  />
                  <span>{idx + 1}. {step}</span>
                </div>
              ))}
            </div>

            {tecnica.actividadEstudiantes.variaciones && (
              <div style={{ backgroundColor: '#FEF3C7', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                <h4 style={{ color: '#92400E', marginBottom: '10px' }}>ğŸšï¸ Adaptaciones por Nivel:</h4>
                {tecnica.actividadEstudiantes.variaciones.map((v, i) => (
                  <p key={i} style={{ color: '#78350F', marginBottom: '6px', fontSize: '14px' }}>â€¢ {v}</p>
                ))}
              </div>
            )}

            {tecnica.actividadEstudiantes.adaptacionesPR && (
              <div style={{ backgroundColor: '#ECFDF5', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                <h4 style={{ color: '#065F46', marginBottom: '10px' }}>ğŸ‡µğŸ‡· Adaptaciones para Puerto Rico:</h4>
                {tecnica.actividadEstudiantes.adaptacionesPR.map((a, i) => (
                  <p key={i} style={{ color: '#047857', marginBottom: '6px', fontSize: '14px' }}>ğŸŒ´ {a}</p>
                ))}
              </div>
            )}

            {tecnica.actividadEstudiantes.ejemplosProblemas && (
              <div style={{ backgroundColor: '#F5F3FF', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                <h4 style={{ color: '#5B21B6', marginBottom: '10px' }}>ğŸ’¡ Ejemplos de Problemas:</h4>
                {tecnica.actividadEstudiantes.ejemplosProblemas.map((e, i) => (
                  <p key={i} style={{ color: '#6D28D9', marginBottom: '6px', fontSize: '14px' }}>â€¢ {e}</p>
                ))}
              </div>
            )}

            <div style={{ backgroundColor: '#E0E7FF', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
              <h4 style={{ color: '#3730A3', marginBottom: '8px' }}>ğŸ“š ConexiÃ³n Curricular:</h4>
              <p style={{ color: '#4338CA' }}>{tecnica.actividadEstudiantes.conexionCurriculo}</p>
            </div>

            <div style={{ marginTop: '16px' }}>
              <h4 style={{ color: '#374151', marginBottom: '8px' }}>ğŸ“ Mi plan de implementaciÃ³n:</h4>
              <textarea
                style={{ ...styles.textarea, borderColor: '#BFDBFE' }}
                placeholder="Â¿CuÃ¡ndo la usarÃ¡s? Â¿Con quÃ© grupo?"
                value={studentNotes[`estudiantes-${tecnica.id}`] || ''}
                onChange={(e) => updateStudentNote(`estudiantes-${tecnica.id}`, e.target.value)}
              />
            </div>
          </div>
        </div>
      )}
    </div>
  );

  return (
    <div style={styles.container}>
      <div style={styles.header}>
        <div style={{ fontSize: '36px', marginBottom: '12px' }}>â¤ï¸ ğŸ¯ ğŸ’¡ ğŸ”§ âœ…</div>
        <h1 style={{ fontSize: '26px', fontWeight: 'bold', marginBottom: '8px', lineHeight: '1.3' }}>
          Integrando Design Thinking al Quehacer PedagÃ³gico
        </h1>
        <p style={{ fontSize: '18px', opacity: '0.95', marginBottom: '4px' }}>
          InnovaciÃ³n PrÃ¡ctica en el Aula PuertorriqueÃ±a ğŸ‡µğŸ‡·
        </p>
        <p style={{ fontSize: '14px', opacity: '0.85' }}>Taller Interactivo | Aprender Haciendo | 4-5 horas</p>
        
        <div style={styles.phaseNav}>
          {phases.map((p) => (
            <button
              key={p.id}
              onClick={() => { setActivePhase(p.id); setActiveSection(null); setActiveTecnica(null); }}
              style={{
                ...styles.phaseNavBtn,
                backgroundColor: activePhase === p.id ? 'white' : 'rgba(255,255,255,0.2)',
                color: activePhase === p.id ? p.color : 'white'
              }}
            >
              {p.title}
            </button>
          ))}
        </div>
      </div>

      <div style={styles.section}>
        <button
          style={styles.sectionButton}
          onClick={() => setActiveSection(activeSection === 'importancia' ? null : 'importancia')}
        >
          <span>ğŸŒŸ Â¿Por QuÃ© Design Thinking en EducaciÃ³n?</span>
          <span>{activeSection === 'importancia' ? 'â–²' : 'â–¼'}</span>
        </button>

        {activeSection === 'importancia' && (
          <div style={styles.sectionContent}>
            <div style={styles.importanceBox}>
              <h3 style={{ color: '#92400E', marginBottom: '12px', fontSize: '18px' }}>ğŸ¯ Â¿QuÃ© es Design Thinking?</h3>
              <p style={{ color: '#78350F', lineHeight: '1.6' }}>
                Es una <strong>metodologÃ­a creativa para resolver problemas</strong> centrada en las personas. 
                En vez de asumir quÃ© necesitan nuestros estudiantes, lo investigamos. En vez de implementar 
                la primera idea, generamos muchas. En vez de lanzar algo "perfecto", probamos y mejoramos.
              </p>
            </div>

            <div style={styles.whyBox}>
              <h3 style={{ color: '#065F46', marginBottom: '12px', fontSize: '18px' }}>ğŸ’ª Â¿Por QuÃ© es IMPORTANTE?</h3>
              <ul style={{ color: '#047857', lineHeight: '1.8', marginLeft: '20px' }}>
                <li><strong>Resuelve problemas reales:</strong> No teorÃ­as - soluciones prÃ¡cticas para tu aula</li>
                <li><strong>Centrado en el estudiante:</strong> DiseÃ±as PARA ellos, no para el currÃ­culo</li>
                <li><strong>Fomenta creatividad:</strong> Rompe el "siempre se ha hecho asÃ­"</li>
                <li><strong>Acepta el error:</strong> Fallar rÃ¡pido = aprender rÃ¡pido</li>
                <li><strong>Usa lo que tienes:</strong> InnovaciÃ³n no requiere presupuesto grande</li>
              </ul>
            </div>

            <div style={{ ...styles.card, background: 'linear-gradient(135deg, #EDE9FE, #DDD6FE)', borderColor: '#8B5CF6' }}>
              <h3 style={{ color: '#5B21B6', marginBottom: '12px', fontSize: '18px' }}>ğŸ‡µğŸ‡· Â¿Por QuÃ© en Puerto Rico?</h3>
              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '12px' }}>
                {[
                  { icon: 'ğŸŒ€', title: 'Post-huracanes', desc: 'Ya sabemos adaptarnos - DT formaliza esa resiliencia' },
                  { icon: 'ğŸ’°', title: 'Recursos limitados', desc: 'DT enseÃ±a a innovar con lo que hay' },
                  { icon: 'ğŸ˜ï¸', title: 'Contextos diversos', desc: 'Cada escuela es Ãºnica - soluciones a la medida' },
                  { icon: 'â¤ï¸', title: 'Cultura boricua', desc: 'Nuestro "resolver" y creatividad encajan perfecto' }
                ].map((item, i) => (
                  <div key={i} style={{ backgroundColor: 'white', padding: '12px', borderRadius: '8px', textAlign: 'center' }}>
                    <div style={{ fontSize: '28px', marginBottom: '8px' }}>{item.icon}</div>
                    <p style={{ fontWeight: 'bold', color: '#5B21B6', marginBottom: '4px' }}>{item.title}</p>
                    <p style={{ fontSize: '13px', color: '#6B7280' }}>{item.desc}</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}
      </div>

      {phases.map((phase) => (
        <div key={phase.id} style={styles.section}>
          <button
            onClick={() => { setActivePhase(activePhase === phase.id ? null : phase.id); setActiveSection(null); setActiveTecnica(null); }}
            style={{
              ...styles.sectionButton,
              background: `linear-gradient(135deg, ${phase.color}, ${phase.color}dd)`
            }}
          >
            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
              <span style={{
                width: '44px', height: '44px',
                backgroundColor: 'rgba(255,255,255,0.25)',
                borderRadius: '50%',
                display: 'flex', alignItems: 'center', justifyContent: 'center',
                fontWeight: 'bold', fontSize: '22px'
              }}>
                {phase.number}
              </span>
              <div style={{ textAlign: 'left' }}>
                <div style={{ fontSize: '18px' }}>{phase.title}</div>
                <div style={{ fontSize: '14px', opacity: '0.9', fontWeight: 'normal' }}>{phase.subtitle}</div>
              </div>
            </div>
            <span>{activePhase === phase.id ? 'â–²' : 'â–¼'}</span>
          </button>

          {activePhase === phase.id && (
            <div style={{ ...styles.sectionContent, backgroundColor: phase.lightColor, borderColor: phase.color, borderWidth: '2px' }}>
              
              <div style={styles.importanceBox}>
                <h3 style={{ color: '#92400E', marginBottom: '10px' }}>ğŸŒŸ Â¿Por quÃ© es IMPORTANTE?</h3>
                <p style={{ color: '#78350F', lineHeight: '1.6' }}>{phase.importancia}</p>
              </div>

              <div style={styles.whyBox}>
                <h3 style={{ color: '#065F46', marginBottom: '10px' }}>ğŸ’¡ Â¿Por quÃ© DEBES integrarla?</h3>
                <p style={{ color: '#047857', lineHeight: '1.6' }}>{phase.porqueIntegrar}</p>
              </div>

              <div style={{ ...styles.activityBox, borderColor: phase.color }}>
                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px', flexWrap: 'wrap' }}>
                  <span style={{ ...styles.tag, backgroundColor: phase.color, color: 'white' }}>ğŸ‘¨â€ğŸ« ACTIVIDAD TALLER</span>
                  <span style={{ ...styles.tag, backgroundColor: '#E0E7FF', color: '#3730A3' }}>â±ï¸ {phase.actividadTaller.duracion}</span>
                </div>
                
                <h3 style={{ color: phase.color, marginBottom: '8px', fontSize: '20px' }}>{phase.actividadTaller.nombre}</h3>
                <p style={{ color: '#4B5563', marginBottom: '16px' }}><strong>Objetivo:</strong> {phase.actividadTaller.objetivo}</p>
                <p style={{ color: '#6B7280', marginBottom: '16px', fontSize: '14px' }}>ğŸ“¦ <strong>Materiales:</strong> {phase.actividadTaller.materiales}</p>

                <div style={{ backgroundColor: 'white', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                  <h4 style={{ color: '#1F2937', marginBottom: '12px' }}>ğŸ“‹ Instrucciones:</h4>
                  {phase.actividadTaller.instrucciones.map((step, idx) => (
                    <div
                      key={idx}
                      onClick={() => toggleStep(`taller-${phase.id}`, idx)}
                      style={{
                        ...styles.stepItem,
                        backgroundColor: completedSteps[`taller-${phase.id}-${idx}`] ? '#D1FAE5' : '#F9FAFB',
                        textDecoration: completedSteps[`taller-${phase.id}-${idx}`] ? 'line-through' : 'none'
                      }}
                    >
                      <input type="checkbox" checked={completedSteps[`taller-${phase.id}-${idx}`] || false} onChange={() => {}} style={styles.checkbox} />
                      <span style={{ color: completedSteps[`taller-${phase.id}-${idx}`] ? '#6B7280' : '#1F2937' }}>{idx + 1}. {step}</span>
                    </div>
                  ))}
                </div>

                {phase.actividadTaller.perfiles && (
                  <div style={{ backgroundColor: '#FEF3C7', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#92400E', marginBottom: '10px' }}>ğŸ­ Perfiles:</h4>
                    {phase.actividadTaller.perfiles.map((p, i) => (<p key={i} style={{ color: '#78350F', marginBottom: '6px', fontSize: '14px' }}>{p}</p>))}
                  </div>
                )}

                {phase.actividadTaller.ejemplo && (
                  <div style={{ backgroundColor: '#DBEAFE', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#1E40AF', marginBottom: '10px' }}>ğŸ“– Ejemplo:</h4>
                    <p style={{ color: '#1E3A8A', marginBottom: '8px' }}><strong>Problema:</strong> {phase.actividadTaller.ejemplo.problema}</p>
                    {phase.actividadTaller.ejemplo.cadena.map((c, i) => (<p key={i} style={{ color: '#3730A3', fontSize: '14px', marginLeft: '16px' }}>{c}</p>))}
                    <p style={{ color: '#1E40AF', marginTop: '10px', fontWeight: 'bold' }}>ğŸ’¡ {phase.actividadTaller.ejemplo.insight}</p>
                  </div>
                )}

                {phase.actividadTaller.scamper && (
                  <div style={{ backgroundColor: '#D1FAE5', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#065F46', marginBottom: '12px' }}>ğŸ”¤ SCAMPER:</h4>
                    {phase.actividadTaller.scamper.map((s, i) => (
                      <div key={i} style={{ display: 'flex', alignItems: 'flex-start', gap: '10px', marginBottom: '10px' }}>
                        <span style={{ backgroundColor: '#10B981', color: 'white', width: '28px', height: '28px', borderRadius: '6px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold', flexShrink: 0 }}>{s.letra}</span>
                        <div><strong style={{ color: '#065F46' }}>{s.palabra}:</strong><span style={{ color: '#047857', marginLeft: '6px', fontSize: '14px' }}>{s.ejemplo}</span></div>
                      </div>
                    ))}
                  </div>
                )}

                {phase.actividadTaller.tiposPrototipo && (
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '12px', marginBottom: '16px' }}>
                    {phase.actividadTaller.tiposPrototipo.map((t, i) => (
                      <div key={i} style={{ backgroundColor: '#F5F3FF', padding: '14px', borderRadius: '10px' }}>
                        <p style={{ fontWeight: 'bold', color: '#5B21B6', marginBottom: '6px' }}>{t.tipo}</p>
                        <p style={{ fontSize: '13px', color: '#6B7280', marginBottom: '4px' }}>{t.desc}</p>
                        <p style={{ fontSize: '12px', color: '#8B5CF6' }}>ğŸ“Œ {t.cuando}</p>
                      </div>
                    ))}
                  </div>
                )}

                {phase.actividadTaller.tecnicaFeedback && (
                  <div style={{ backgroundColor: '#E0F2FE', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#0369A1', marginBottom: '12px' }}>ğŸ’¬ TÃ©cnica Feedback:</h4>
                    {phase.actividadTaller.tecnicaFeedback.map((t, i) => (
                      <div key={i} style={{ marginBottom: '10px' }}>
                        <strong style={{ color: '#0284C7' }}>{t.tipo}</strong>
                        <span style={{ color: '#0369A1', marginLeft: '8px' }}>- {t.desc}</span>
                        <p style={{ color: '#0EA5E9', fontSize: '13px', fontStyle: 'italic', marginLeft: '24px' }}>Ej: {t.ejemplo}</p>
                      </div>
                    ))}
                  </div>
                )}

                <div style={{ backgroundColor: '#FEF9C3', padding: '16px', borderRadius: '10px', borderLeft: '4px solid #F59E0B' }}>
                  <h4 style={{ color: '#92400E', marginBottom: '8px' }}>ğŸ’­ ReflexiÃ³n:</h4>
                  <p style={{ color: '#78350F', fontStyle: 'italic' }}>{phase.actividadTaller.reflexionGuia}</p>
                </div>

                <div style={{ marginTop: '16px' }}>
                  <h4 style={{ color: '#374151', marginBottom: '8px' }}>ğŸ“ Mis notas:</h4>
                  <textarea style={styles.textarea} placeholder="Escribe aquÃ­..." value={notes[`taller-${phase.id}`] || ''} onChange={(e) => updateNote(`taller-${phase.id}`, e.target.value)} />
                </div>
              </div>

              <div style={{ ...styles.activityBox, borderColor: '#3B82F6', background: 'linear-gradient(to bottom, #EFF6FF, white)' }}>
                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px', flexWrap: 'wrap' }}>
                  <span style={{ ...styles.tag, backgroundColor: '#3B82F6', color: 'white' }}>ğŸ‘¨â€ğŸ“ ACTIVIDAD ESTUDIANTES</span>
                  <span style={{ ...styles.tag, backgroundColor: '#DBEAFE', color: '#1E40AF' }}>â±ï¸ {phase.actividadEstudiantes.duracion}</span>
                  <span style={{ ...styles.tag, backgroundColor: '#FEE2E2', color: '#991B1B' }}>ğŸ“Š {phase.actividadEstudiantes.nivel}</span>
                </div>

                <h3 style={{ color: '#1E40AF', marginBottom: '8px', fontSize: '20px' }}>{phase.actividadEstudiantes.nombre}</h3>
                <p style={{ color: '#4B5563', marginBottom: '16px' }}><strong>Objetivo:</strong> {phase.actividadEstudiantes.objetivo}</p>
                <p style={{ color: '#6B7280', marginBottom: '16px', fontSize: '14px' }}>ğŸ“¦ <strong>Materiales:</strong> {phase.actividadEstudiantes.materiales}</p>

                <div style={{ backgroundColor: 'white', padding: '16px', borderRadius: '10px', marginBottom: '16px', border: '1px solid #BFDBFE' }}>
                  <h4 style={{ color: '#1F2937', marginBottom: '12px' }}>ğŸ“‹ Instrucciones:</h4>
                  {phase.actividadEstudiantes.instrucciones.map((step, idx) => (
                    <div key={idx} onClick={() => toggleStep(`estudiantes-${phase.id}`, idx)} style={{ ...styles.stepItem, backgroundColor: completedSteps[`estudiantes-${phase.id}-${idx}`] ? '#DBEAFE' : '#F9FAFB' }}>
                      <input type="checkbox" checked={completedSteps[`estudiantes-${phase.id}-${idx}`] || false} onChange={() => {}} style={{ ...styles.checkbox, accentColor: '#3B82F6' }} />
                      <span>{idx + 1}. {step}</span>
                    </div>
                  ))}
                </div>

                {phase.actividadEstudiantes.variaciones && (
                  <div style={{ backgroundColor: '#FEF3C7', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#92400E', marginBottom: '10px' }}>ğŸšï¸ Adaptaciones:</h4>
                    {phase.actividadEstudiantes.variaciones.map((v, i) => (<p key={i} style={{ color: '#78350F', marginBottom: '6px', fontSize: '14px' }}>â€¢ {v}</p>))}
                  </div>
                )}

                {phase.actividadEstudiantes.ejemplosTransformacion && (
                  <div style={{ backgroundColor: '#ECFDF5', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#065F46', marginBottom: '12px' }}>ğŸ”„ Transformaciones:</h4>
                    {phase.actividadEstudiantes.ejemplosTransformacion.map((t, i) => (
                      <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '10px', fontSize: '14px', flexWrap: 'wrap' }}>
                        <span style={{ backgroundColor: '#FEE2E2', color: '#991B1B', padding: '8px 12px', borderRadius: '8px' }}>{t.queja}</span>
                        <span>â†’</span>
                        <span style={{ backgroundColor: '#D1FAE5', color: '#065F46', padding: '8px 12px', borderRadius: '8px' }}>{t.oportunidad}</span>
                      </div>
                    ))}
                  </div>
                )}

                {phase.actividadEstudiantes.ejemplos && (
                  <div style={{ backgroundColor: '#F5F3FF', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#5B21B6', marginBottom: '10px' }}>ğŸ“– Ejemplos:</h4>
                    {phase.actividadEstudiantes.ejemplos.map((e, i) => (<p key={i} style={{ color: '#6D28D9', marginBottom: '6px', fontSize: '14px' }}>â€¢ {e}</p>))}
                  </div>
                )}

                {phase.actividadEstudiantes.opciones && (
                  <div style={{ backgroundColor: '#EDE9FE', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#5B21B6', marginBottom: '10px' }}>ğŸ¨ Opciones:</h4>
                    {phase.actividadEstudiantes.opciones.map((o, i) => (<p key={i} style={{ color: '#6D28D9', marginBottom: '6px', fontSize: '14px' }}>â€¢ {o}</p>))}
                  </div>
                )}

                {phase.actividadEstudiantes.tips && (
                  <div style={{ backgroundColor: '#FDF4FF', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#86198F', marginBottom: '10px' }}>ğŸ’¡ Tips:</h4>
                    {phase.actividadEstudiantes.tips.map((tip, i) => (<p key={i} style={{ color: '#A21CAF', marginBottom: '6px', fontSize: '14px' }}>âœ¨ {tip}</p>))}
                  </div>
                )}

                {phase.actividadEstudiantes.invitados && (
                  <div style={{ backgroundColor: '#FFF7ED', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                    <h4 style={{ color: '#C2410C', marginBottom: '10px' }}>ğŸ‘¥ Invitados:</h4>
                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                      {phase.actividadEstudiantes.invitados.map((inv, i) => (<span key={i} style={{ backgroundColor: '#FFEDD5', color: '#C2410C', padding: '6px 12px', borderRadius: '20px', fontSize: '13px' }}>{inv}</span>))}
                    </div>
                  </div>
                )}

                <div style={{ backgroundColor: '#E0E7FF', padding: '16px', borderRadius: '10px', marginBottom: '16px' }}>
                  <h4 style={{ color: '#3730A3', marginBottom: '8px' }}>ğŸ“š ConexiÃ³n Curricular:</h4>
                  <p style={{ color: '#4338CA' }}>{phase.actividadEstudiantes.conexionCurriculo}</p>
                </div>

                <div style={{ marginTop: '16px' }}>
                  <h4 style={{ color: '#374151', marginBottom: '8px' }}>ğŸ“ Mi plan:</h4>
                  <textarea style={{ ...styles.textarea, borderColor: '#BFDBFE' }} placeholder="Â¿CuÃ¡ndo la usarÃ¡s?" value={studentNotes[`estudiantes-${phase.id}`] || ''} onChange={(e) => updateStudentNote(`estudiantes-${phase.id}`, e.target.value)} />
                </div>
              </div>

              {tecnicasAdicionales[phase.id] && tecnicasAdicionales[phase.id].map(tecnica => renderTecnicaAdicional(tecnica, phase.color))}
            </div>
          )}
        </div>
      ))}

      <div style={{ textAlign: 'center', padding: '28px', backgroundColor: 'white', borderRadius: '16px', marginTop: '24px', boxShadow: '0 4px 20px rgba(0,0,0,0.08)' }}>
        <p style={{ fontSize: '20px', fontWeight: 'bold', color: '#4338CA', marginBottom: '8px' }}>"La innovaciÃ³n educativa no requiere grandes presupuestos,</p>
        <p style={{ fontSize: '20px', fontWeight: 'bold', color: '#7C3AED', marginBottom: '16px' }}>requiere grandes corazones dispuestos a intentar algo nuevo."</p>
        <p style={{ color: '#6B7280' }}>ğŸ‡µğŸ‡· Â¡Ã‰xito en tu camino de innovaciÃ³n pedagÃ³gica!</p>
      </div>
    </div>
  );
};

export default TallerDesignThinking;
